import{_ as o,r as p,o as c,c as i,a,b as n,d as t,f as e}from"./app.1ded8a6d.js";const l={},u=e('<h1 id="widgets-authentication" tabindex="-1"><a class="header-anchor" href="#widgets-authentication" aria-hidden="true">#</a> Widgets Authentication</h1><h2 id="page-contents" tabindex="-1"><a class="header-anchor" href="#page-contents" aria-hidden="true">#</a> Page Contents</h2><ul><li><a href="#configuration">Configuration</a></li><li><a href="#signout">Signout</a></li></ul><hr><p>All BCC widgets require access to the <code>access_token</code> of the end-user. This makes it possible to personalize the widget for the end-user that is visiting your application.</p><p>(The <code>access_token</code> gets returned from the sign-on system when the user logs in).</p><p>Please use the following articles to configure authentication of widgets:</p><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration" aria-hidden="true">#</a> Configuration</h2><h3 id="regular-web-application" tabindex="-1"><a class="header-anchor" href="#regular-web-application" aria-hidden="true">#</a> Regular web application</h3><p>The session of the user is stored server-side (with the use of cookies), e.g. ASP.NET, ASP.NET Core, PHP etc.</p><p>The application should have an endpoint that returns the access_token to the browser of the end-user.</p>',11),r=a("p",null,[n("Set the "),a("code",null,"audience"),n(" property to "),a("code",null,"https://widgets.brunstad.org")],-1),d={href:"/docs/bcc-signon/asp.net-core#get-your-application-credentials",target:"_blank",rel:"noopener noreferrer"},h={href:"/docs/bcc-signon/asp.net-core#add-account-controller",target:"_blank",rel:"noopener noreferrer"},k=a("ul",null,[a("li",null,"The access_token should be able to be requested from browser (based on the cookie of the user).")],-1),g=a("li",null,[a("p",null,'Set the data-authentication-type attribute in the Widgets script tag to "WebApp"')],-1),m=a("li",null,[a("p",null,"Set the data-authentication-location attribute in the Widgets script tag to the path of the endpoint from step 2")],-1),b=e(`<h4 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- topbar widget --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script-bcc-...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-authentication-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WebApp<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-authentication-location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/Account/accesstoken<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://widgets.bcc.no/widgets/TopbarJs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- end topbar widget --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="alternative-approach" tabindex="-1"><a class="header-anchor" href="#alternative-approach" aria-hidden="true">#</a> Alternative approach</h5><p><strong>Note</strong>: This option is intended as a fallback for option 1, if your application cannot implement option 1.</p><p>This option can be used by applications that use server-side rendering (e.g. with most traditional applications).</p><p>Configure the top bar for ‘inline access_token’:</p>`,6),v=a("li",null,[n("Set the "),a("code",null,"data-authentication-type"),n(" attribute to "),a("code",null,'"inline-access-token"')],-1),f=a("li",null,[n("Remove the "),a("code",null,"data-authentication-location"),n(" attribute")],-1),_=a("code",null,"audience",-1),q=a("code",null,"https://widgets.brunstad.org",-1),w={href:"/docs/bcc-signon/asp.net-core#edit-configuration-file",target:"_blank",rel:"noopener noreferrer"},x=a("li",null,[n("Add the "),a("code",null,"data-access-token"),n(" attribute with the access_token of the end-user")],-1),T=e(`<div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- topbar widget --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script-bcc-...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-authentication-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inline-access-token<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-access-token</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ACCESS_TOKEN OF END USER<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://widgets.bcc.no/widgets/TopbarJs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- end topbar widget --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="single-page-application" tabindex="-1"><a class="header-anchor" href="#single-page-application" aria-hidden="true">#</a> Single Page Application</h3><p>The session of the user is stored in the browser of the user, e.g. Angular, React, etc.</p><p>The application should provide the path of the access token.</p><ol><li>Set the data-authentication-type attribute to &quot;SPA&quot;</li><li>Set the data-authentication-location attribute to the path in LocalStorage. this also supports a nested JSON object in the value of the LocalStorage entry (e.g. oidc.accesstoken).</li></ol><h4 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> Example</h4><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!-- topbar widget --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>script-bcc-topbar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-authentication-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SPA<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-authentication-location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oidc.accesstoken<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://widgets.bcc.no/widgets/TopbarJs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- end topbar widget --&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="signout" tabindex="-1"><a class="header-anchor" href="#signout" aria-hidden="true">#</a> Signout</h2><p>BCC Widgets uses LocalStorage of your application to store (and cache) values. The storage of BCC widgets can be cleared by loading the following HTML page:</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>signout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://widgets.bcc.no/widgets/signoutjs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        window<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token string">&quot;path to clear session&quot;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Path to clear session</strong>: The user gets redirected to this location after widgets has been signed out.</p>`,11);function S(y,C){const s=p("ExternalLinkIcon");return c(),i("div",null,[u,a("ol",null,[a("li",null,[r,a("ul",null,[a("li",null,[n("located in the OpenID Configuration ("),a("a",d,[n("see ASP.NET Core Tutorial for an example"),t(s)]),n(") .")])])]),a("li",null,[a("p",null,[n("Create an endpoint that returns the access_token of the end-user ("),a("a",h,[n("see ASP.NET Core Tutorial for an example"),t(s)]),n(").")]),k]),g,m]),b,a("ol",null,[v,f,a("li",null,[n("Request an access_token for the Widgets API, by setting the "),_,n(" to "),q,n(" ("),a("a",w,[n("see ASP.NET Core Tutorial for an example"),t(s)]),n(") .")]),x]),T])}const E=o(l,[["render",S],["__file","widget-authentication.html.vue"]]);export{E as default};
