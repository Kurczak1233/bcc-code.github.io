import{_ as c,r as o,o as l,c as r,a as n,b as s,d as a,w as p,f as i}from"./app.1ded8a6d.js";const u={},d=n("h1",{id:"api-integration",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#api-integration","aria-hidden":"true"},"#"),s(" API Integration")],-1),k=i('<h2 id="menu" tabindex="-1"><a class="header-anchor" href="#menu" aria-hidden="true">#</a> Menu</h2><ul><li><a href="index">Home</a></li><li><a href="api-integration">API integration</a></li><li><a href="webhooks">Webhooks integration</a></li><li><a href="data-structures-and-scopes">Data Structures and Scopes</a></li><li><a href="single-sign-out">Single Sign Out</a></li></ul><h2 id="integrating-with-the-members-api" tabindex="-1"><a class="header-anchor" href="#integrating-with-the-members-api" aria-hidden="true">#</a> Integrating with the Members API</h2>',3),h=n("h2",{id:"authentication-and-authorization-to-the-api",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#authentication-and-authorization-to-the-api","aria-hidden":"true"},"#"),s(" Authentication and Authorization to the API")],-1),m=n("p",null,"It is currently only possible to get access to the API via an API Key. OAuth2 support will come soon.",-1),v=n("h2",{id:"api-key",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#api-key","aria-hidden":"true"},"#"),s(" API-key")],-1),b={href:"https://members.bcc.no/organisations",target:"_blank",rel:"noopener noreferrer"},g=n("img",{src:"https://user-images.githubusercontent.com/12196246/126334453-3cad28e8-b8f5-4156-8073-a79c4d7e647e.png",alt:"image"},null,-1),f=n("li",null,[s('On the "Data Access" page you should see the section for API Keys '),n("img",{src:"https://user-images.githubusercontent.com/12196246/126334964-374e824b-8447-4a38-8b9b-a82becd6259a.png",alt:"image"})],-1),y=n("h2",{id:"code-snippets",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#code-snippets","aria-hidden":"true"},"#"),s(" Code snippets")],-1),_={href:"https://www.npmjs.com/package/node-fetch",target:"_blank",rel:"noopener noreferrer"},w=n("br",null,null,-1),x=i(`<h3 id="example-1-get-a-person-given-his-personid" tabindex="-1"><a class="header-anchor" href="#example-1-get-a-person-given-his-personid" aria-hidden="true">#</a> Example 1 - Get a person given his personID</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node-fetch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> httpResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://api.members.bcc.no/person?personID=12345&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">headers</span><span class="token operator">:</span>
                    <span class="token punctuation">{</span>   <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&#39;x-access-token&#39;</span><span class="token operator">:</span><span class="token string">&#39;API-KEY-HERE&#39;</span>
                    <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> httpResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> person <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Person retrieved from the members api&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="example-2-get-all-people-from-oslo-follo-churchid-69" tabindex="-1"><a class="header-anchor" href="#example-2-get-all-people-from-oslo-follo-churchid-69" aria-hidden="true">#</a> Example 2 - Get all people from Oslo/Follo (churchID = 69)</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node-fetch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> httpResponse <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;https://api.members.bcc.no/person?churchID=69&amp;$limit=50&amp;$skip=0&#39;</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span>
                <span class="token literal-property property">headers</span><span class="token operator">:</span>
                    <span class="token punctuation">{</span>   <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&#39;x-access-token&#39;</span><span class="token operator">:</span><span class="token string">&#39;API-KEY-HERE&#39;</span>
                    <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> httpResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> everybodyFromOsloFollo <span class="token operator">=</span> result<span class="token punctuation">.</span>data
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Fifty people retrieved in Oslo/Follo from the members API&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>everybodyFromOsloFollo<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="oauth2" tabindex="-1"><a class="header-anchor" href="#oauth2" aria-hidden="true">#</a> OAuth2</h2><p>Coming soon</p>`,6);function I(A,P){const e=o("RouterLink"),t=o("ExternalLinkIcon");return l(),r("div",null,[d,n("p",null,[n("strong",null,[n("em",null,[s("NB. We recommend that you use "),a(e,{to:"/_products/bcc-membership-docs/webhooks.html"},{default:p(()=>[s("webhooks")]),_:1}),s(" to keep your system up to date with the Members data, as this will relieve the load from the API. But you are still welcome to use the API")])])]),k,n("p",null,[s("Please read the "),a(e,{to:"/_products/bcc-membership-docs/"},{default:p(()=>[s("Getting Started")]),_:1}),s(" section before going through this page. Once scopes have been approved for your client (application) you can integrate with the members api.")]),h,m,v,n("ol",null,[n("li",null,[s("To get access to your API key, please navigate to your "),n("a",b,[s("organization"),a(t)]),s(' click on the "Applications" tab, then on the application you want to work with and then the "Data Access" tab '),g]),f]),y,n("p",null,[s("For these example we are using the "),n("a",_,[s("node-fetch"),a(t)]),s(" npm package "),w]),x])}const E=c(u,[["render",I],["__file","api-integration.html.vue"]]);export{E as default};
