# This workflow creates a ADR based on a issue description on a issue close event.

name: Create ADR

on:
  issues: 
    types: [closed]

jobs:
  create_adr:
    if: ${{ contains(github.event.issue.labels.*.name, 'adr') }}
    runs-on: ubuntu-latest
    steps:
      - name: View issue information
        run: |
          echo "Issue title: ${{ github.event.issue.title }}"
          echo "Issue body: ${{ github.event.issue.body }}"

      - uses: "finnp/create-file-action@master"
        env:
          FILE_NAME: ${{ format('docs/adl/{0}_{1}.md', date::$(date +'%Y%m%d'),  github.event.issue.title) }}
          FILE_DATA: ${{ github.event.issue.body }}

      - name: View the github context
        run: echo "$GITHUB_CONTEXT"
        env:
         GITHUB_CONTEXT: ${{ toJson(github) }}
